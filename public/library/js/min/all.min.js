function clearBrewers(){cookies=document.cookie.split(";");for(var e=0;e<cookies.length;e++)eraseCookie(cookies[e].split("=")[0]);id=1,totalNames=0,countCookies=0,$.cookie("brewer_total",totalNames),$.cookie("brewer_existing",countCookies)}function eraseCookie(e){createCookie(e,"",-1)}function createCookie(e,o,t){if(t){var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3);var n="; expires="+i.toGMTString()}else var n="";document.cookie=e+"="+o+n+"; path=/"}function rollForBrewer(){jQuery(".kettle--outer").hasClass("hidden")?(jQuery(".brew--action").addClass("push"),setTimeout(function(){jQuery(".kettle").addClass("fall-in"),jQuery(".kettle--outer").removeClass("hidden")},500),setTimeout(function(){getBrewer()},1e3),setTimeout(function(){jQuery(".kettle").removeClass("fall-in")},2e3)):(jQuery(".kettle").removeClass("boiled"),jQuery(".kettle--name--wrap").removeClass("show"),getBrewer())}function getBrewer(){jQuery(".brew-list").addClass("brew-list__active"),jQuery(".brew-list li").removeClass("itsme");var e=jQuery(".brew-list li").toArray(),o=e.length,t=Math.floor(Math.random()*o),i=e[t],n=jQuery(i).find(".option--name").text();jQuery(i).addClass("itsme"),setTimeout(function(){jQuery(".kettle--name").text(n)},500),setTimeout(function(){jQuery(".kettle").addClass("boiling")},2e3),setTimeout(function(){jQuery(".kettle").addClass("boiled")},4e3),setTimeout(function(){jQuery(".kettle--name--wrap").addClass("show")},6e3)}function initCountdownTimer(){if("granted"!==Notification.permission)Notification.requestPermission();else if(notificationBrewTimer=jQuery("#countdownVal").val(),0!=notificationBrewTimer){notificationTimer=notificationBrewTimer+":00";var e=setInterval(function(){console.log(notificationTimer);var o=notificationTimer.split(":"),t=parseInt(o[0],10),i=parseInt(o[1],10);--i,t=0>i?--t:t,i=0>i?59:i,i=10>i?"0"+i:i,jQuery(".countdown--timer").html(t+":"+i),notificationTimer=t+":"+i,0>t&&(console.log("Running the notification function"),notificationPopup(),clearInterval(e))},1e3)}else console.log("Countdown is not set")}function notificationPopup(){new Notification("Time's up dude!",{icon:"http://www.getthebrewson.co.uk/library/images/img-notification-tile.png",body:"It's someone elses turn to make the brews. Click to give it another spin!"});window.open("http://www.getthebrewson.co.uk/"),jQuery(".countdown").removeClass("visible")}var countCookies=0,totalNames=0,id=0,cookies="",notificationBrewTimer=0,notificationTimer=0;$(document).ready(function(){$(".add-name").submit(function(e){e.preventDefault()}),countCookies=$.cookie("brewer_existing"),"NaN"==countCookies&&(countCookies=0),totalNames=$(".brew-list li").length,id=countCookies++;var e=document.getElementById("addBrewer"),o=document.getElementById("dataInput"),t=document.getElementById("brewList");e.onclick=function(){$.cookie("brewer_number_"+id,o.value),$.cookie("brewer_total",totalNames),$.cookie("brewer_existing",countCookies),t.innerHTML+='<li class="option option-'+id+'" data-name="brewer_number_'+id+'"><span class="option--name">'+o.value+'</span> <span class="option--delete">Remove this name</span></li>'},$("#addBrewer").click(function(){id++,$(".brew-list li").length>1&&$("#brews").addClass("brewme"),$("#dataInput").val(""),totalNames++,countCookies++,$.cookie("brewer_total",totalNames),$.cookie("brewer_existing",countCookies),console.log("Total Name = "+totalNames),console.log("Count cookies = "+countCookies)}),$("#brews").click(function(){initCountdownTimer(),rollForBrewer()}),$("#clearbrewers").click(function(){clearBrewers(),$(".brew-list").empty()}),$("#reRoll").click(function(){rollForBrewer()}),$("body").on("click",".option--delete",function(){$(this).closest(".option").slideUp("fast");var e=$(this).closest(".option");setTimeout(function(){$(e).remove()},1200);var o=$(this).closest(".option").data("name");eraseCookie(o),totalNames--,$.cookie("brewer_total",totalNames)})}),document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()});